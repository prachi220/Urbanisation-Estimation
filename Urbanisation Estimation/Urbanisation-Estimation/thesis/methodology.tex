\section{Obtaining BU/NBU classified images}
\label{method:obtainimages}

\subsection{Classifier on Google Earth Engine}

We use a pixel-based classification approach (into builtup and non-builtup categories) for the districts of India, utilizing the full spectral imagery available in Landsat, as well as the NDVI and NDBI indices. For this, we use the GEE built-in Classification and Regression Trees (CART) classifier \cite{breiman1984classification} based on the remotely sensed imagery from Landsat 8 (LANDSAT/LC08/C01/T1\_TOA i.e. USGS Landsat 8 Collection 1 Tier 1 TOA Reflectance \cite{LS8}) as input to predict built up and non-built up areas. The training data fed to the classifier is a FeatureCollection with a property storing the class label as 1 for BU and 2 for NBU and the bands ['B1','B2', 'B3', 'B4', 'B5', 'B6', 'B7', 'B8', 'B10', 'B11', 'NDBI', 'NDVI'] as predictor variables. This FeatureCollection is imported from a groundtruth dataset available in the form of a Fusion Table \cite{DATASETGOLDBLATT}, generated by Goldblatt et al.\cite{goldblatt2016detecting} As discussed previously, they have created and validated a new dataset for India, consisting of 21,030 polygons (30 m x 30 m in size), randomly distributed throughout India and manually labeled as BU or as NBU. Among these 21,030 polygons, 4682 polygons are labeled as BU and 16,348 polygons are labeled as NBU. This data incorporates different agro-climatic zones found in majority of developing countries like India, zones being characterized by their relatively homogenous environmental-physical characteristics, such as soil type, rainfall, temperature, etc.

We run this classifier on the districts of Gurgaon and Jaipur for the years from 2014 to 2018, for which the Landsat 8 imagery is available. The original google earth images of these districts can be seen in Fig.~\ref{fig:original_ggn} and Fig.~\ref{fig:original_jpr}. Further, Fig.~\ref{fig:classified_ggn} and Fig.~\ref{fig:classified_jpr} show the pixel-wise classified images obtained from the CART classifier. Here, the dark gray pixels represent BU, while the white ones are NBU.

From the classified images obtained, we observe that the classification isn't visibly accurate with large patches of white region throughout the districts. On deeper investigation, we identify that the classification is highly influenced by the cloud cover index in the Landsat images and can account for the noisy results obtained. The dense and non-uniformly distributed cloud cover for Gurgaon and Jaipur can be clearly observed in Fig.~\ref{fig:cloud_ggn} and Fig.~\ref{fig:cloud_jpr}.

\begin{figure}[H]
	\begin{center}
		\resizebox{55mm}{!} {\includegraphics *{images/gee/original_ggn_14.png}}
		\resizebox{55mm}{!} {\includegraphics *{images/gee/original_ggn_15.png}}
		\resizebox{55mm}{!} {\includegraphics *{images/gee/original_ggn_14.png}}
		\resizebox{55mm}{!} {\includegraphics *{images/gee/original_ggn_17.png}}
		\resizebox{55mm}{!} {\includegraphics *{images/gee/original_ggn_18.png}}
		\caption {Gurgaon: Original Google Earth images, years 2014, 2015, 2016, 2017 \& 2018}
		\label{fig:original_ggn}
	\end{center}
\end{figure}

\begin{figure}[H]
	\begin{center}
		\resizebox{50mm}{!} {\includegraphics *{images/gee/original_jpr_14.png}}
		\resizebox{50mm}{!} {\includegraphics *{images/gee/original_jpr_15.png}}
		\resizebox{50mm}{!} {\includegraphics *{images/gee/original_jpr_16.png}}
		\resizebox{50mm}{!} {\includegraphics *{images/gee/original_jpr_17.png}}
		\resizebox{50mm}{!} {\includegraphics *{images/gee/original_jpr_18.png}}
		\caption {Jaipur: Original Google Earth images, years 2014, 2015, 2016, 2017 \& 2018}
		\label{fig:original_jpr}
	\end{center}
\end{figure}

\begin{figure}[H]
	\begin{center}
		\resizebox{55mm}{!} {\includegraphics *{images/gee/classified_ggn_14.png}}
		\resizebox{55mm}{!} {\includegraphics *{images/gee/classified_ggn_15.png}}
		\resizebox{55mm}{!} {\includegraphics *{images/gee/classified_ggn_16.png}}
		\resizebox{55mm}{!} {\includegraphics *{images/gee/classified_ggn_17.png}}
		\resizebox{55mm}{!} {\includegraphics *{images/gee/classified_ggn_18.png}}
		\caption {Gurgaon: Classified images, years 2014, 2015, 2016, 2017 \& 2018}
		\label{fig:classified_ggn}
	\end{center}
\end{figure}

\begin{figure}[H]
	\begin{center}
		\resizebox{50mm}{!} {\includegraphics *{images/gee/classified_jpr_14.png}}
		\resizebox{50mm}{!} {\includegraphics *{images/gee/classified_jpr_15.png}}
		\resizebox{50mm}{!} {\includegraphics *{images/gee/classified_jpr_16.png}}
		\resizebox{50mm}{!} {\includegraphics *{images/gee/classified_jpr_17.png}}
		\resizebox{50mm}{!} {\includegraphics *{images/gee/classified_jpr_18.png}}
		\caption {Jaipur: Classified images, years 2014, 2015, 2016, 2017 \& 2018}
		\label{fig:classified_jpr}
	\end{center}
\end{figure}

\begin{figure}[H]
	\begin{center}
		\resizebox{55mm}{!} {\includegraphics *{images/gee/cloud_ggn_14.png}}
		\resizebox{55mm}{!} {\includegraphics *{images/gee/cloud_ggn_15.png}}
		\resizebox{55mm}{!} {\includegraphics *{images/gee/cloud_ggn_16.png}}
		\resizebox{55mm}{!} {\includegraphics *{images/gee/cloud_ggn_17.png}}
		\resizebox{55mm}{!} {\includegraphics *{images/gee/cloud_ggn_18.png}}
		\caption {Gurgaon: Cloud Cover in Earth images, years 2014, 2015, 2016, 2017 \& 2018}
		\label{fig:cloud_ggn}
	\end{center}
\end{figure}

\begin{figure}[H]
	\begin{center}
		\resizebox{50mm}{!} {\includegraphics *{images/gee/cloud_jpr_14.png}}
		\resizebox{50mm}{!} {\includegraphics *{images/gee/cloud_jpr_15.png}}
		\resizebox{50mm}{!} {\includegraphics *{images/gee/cloud_jpr_16.png}}
		\resizebox{50mm}{!} {\includegraphics *{images/gee/cloud_jpr_17.png}}
		\resizebox{50mm}{!} {\includegraphics *{images/gee/cloud_jpr_18.png}}
		\caption {Jaipur: Cloud Cover in Earth images, years 2014, 2015, 2016, 2017 \& 2018}
		\label{fig:cloud_jpr}
	\end{center}
\end{figure}

\subsection{Accounting for Cloud Cover}
\label{sub:cloudcover}

\begin{enumerate}
	
	\item As we observe the high cloud cover content randomly spread in the area, we use cloud masking module by Rodrigo Principe \cite{RPM} to mask away the majority of clouds and apply maximum correction on the input Landsat images.

	\item We try out two approaches to address the issue of high cloud cover indices. The first technique involves creating a composite by selecting the pixels from the least cloudy scene, by taking a median of all available values (multiple images are available for the given duration) for each pixel. While in the second technique, we calculate the cloud score of each pixel and use that as the quality band for a quality mosaic. On further experimentation, we find that taking median gives us better results and thus, we stick to the technique of median in further experimentation and analysis. 

	\item Since these masking techniques are quite generic without hampering other attributes available in the imagery, we observe that there are still many districts with high and noisy values of cloud cover. In most districts, we observe that the values for some years are particularly higher than those for other years. So we perform a state-level analysis to remove the districts that have extremely high absolute values of cloud cover and establish rules for selecting years to take for further analysis: \\

		\begin{itemize}
			\item {\bf Absolute Cloud Cover Values:} We put a threshold on the absolute value of cloud cover over the years, to eliminate the extremely high cloud cover districts, which can otherwise act as noise in our further analysis. The threshold value is then set to t$_{h}$ = 3. This leads to the removal of any district with the average cloud cover value (over the 5 years) more than t$_{h}$, from further analysis. Among the 9 states being monitored, 6 states go undisturbed, while in the rest 3, a few districts are dropped [Assam: 15/22, Bihar: 1/37, Uttarakhand: 3/13 are dropped]. The absolute value plots before and after thresholding for these three districts can be found in Fig.~\ref{fig:absolutecloudplots}.

			\begin{figure}[H]
				\begin{center}
					\begin{subfigure}[b]{\textwidth}
						\centering
						\resizebox{60mm}{!} {\includegraphics *{images/cloudcover/absolutecloudplotsassambefore.png}}
						\resizebox{60mm}{!} {\includegraphics *{images/cloudcover/absolutecloudplotsassamafter.png}}
						\caption{Assam: 15 out of 22 districts removed}
					\end{subfigure}
					\caption {Absolute Cloud Cover plots before and after thresholding}
				\end{center}
			\end{figure}

			\begin{figure}[H]\ContinuedFloat
				\begin{center}
					\begin{subfigure}[b]{\textwidth}
						\centering
						\resizebox{60mm}{!} {\includegraphics *{images/cloudcover/absolutecloudplotsbiharbefore.png}}
						\resizebox{60mm}{!} {\includegraphics *{images/cloudcover/absolutecloudplotsbiharafter.png}}
						\caption{Bihar: 1 out of 37 districts removed}
					\end{subfigure}
					\hfill
					\begin{subfigure}[b]{\textwidth}
						\centering
						\resizebox{60mm}{!} {\includegraphics *{images/cloudcover/absolutecloudplotsuttarakhandbefore.png}}
						\resizebox{60mm}{!} {\includegraphics *{images/cloudcover/absolutecloudplotsuttarakhandafter.png}}
						\caption{Uttarakhand: 3 out of 13 districts removed}
					\end{subfigure}
					\caption {Absolute Cloud Cover plots before and after thresholding (contd.)}
					\label{fig:absolutecloudplots}
				\end{center}
			\end{figure}

			\item {\bf Variance in Cloud Cover Values:} After removing the highly cloudy districts, we further run a deeper analysis on each of the states to check for any outlier values. For each state, we plot the variance of the cloud cover values for every district, calculated by removing a year one by one. We understand that if for some year, the variance is lower than the other values, then that year is an outlier and likely to serve as a noise. From this analysis, we observe a dip at year 2016 for most of the states (Fig.~\ref{fig:varianceplots}), which is confirmed by visually looking at the Earth images and hence we skip this year from our further analysis. Further, to have minimum cloud cover, we do our analysis on the summer months of March and April.

			\begin{figure}[H]
				\begin{center}
					\begin{subfigure}[b]{0.4\textwidth}
						\centering
						\resizebox{60mm}{!} {\includegraphics *{images/cloudcover/varianceplotsassam.png}}
						\caption{Assam: 7 districts}
					\end{subfigure}
					\hfill
					\begin{subfigure}[b]{0.4\textwidth}
						\centering
						\resizebox{60mm}{!} {\includegraphics *{images/cloudcover/varianceplotsbihar.png}}
						\caption{Bihar: 36 districts}
					\end{subfigure}
					\caption {Year wise variance plots after thresholding}
				\end{center}
			\end{figure}

			\begin{figure}[H]\ContinuedFloat
				\begin{center}
					\begin{subfigure}[b]{0.4\textwidth}
						\centering
						\resizebox{60mm}{!} {\includegraphics *{images/cloudcover/varianceplotschattisgarh.png}}
						\caption{Chattisgarh: 14 districts}
					\end{subfigure}
					\hfill
					\begin{subfigure}[b]{0.4\textwidth}
						\centering
						\resizebox{60mm}{!} {\includegraphics *{images/cloudcover/varianceplotsjharkhand.png}}
						\caption{Jharkhand: 17 districts}
					\end{subfigure}
					\hfill
					\begin{subfigure}[b]{0.4\textwidth}
						\centering
						\resizebox{60mm}{!} {\includegraphics *{images/cloudcover/varianceplotsmadhyapradesh.png}}
						\caption{Madhya Pradesh: 45 districts}
					\end{subfigure}
					\hfill
					\begin{subfigure}[b]{0.4\textwidth}
						\centering
						\resizebox{60mm}{!} {\includegraphics *{images/cloudcover/varianceplotsodisha.png}}
						\caption{Odisha: 29 districts}
					\end{subfigure}
					\hfill
					\begin{subfigure}[b]{0.4\textwidth}
						\centering
						\resizebox{60mm}{!} {\includegraphics *{images/cloudcover/varianceplotsrajasthan.png}}
						\caption{Rajasthan: 32 districts}
					\end{subfigure}
					\hfill
					\begin{subfigure}[b]{0.4\textwidth}
						\centering
						\resizebox{60mm}{!} {\includegraphics *{images/cloudcover/varianceplotsuttarakhand.png}}
						\caption{Uttarakhand: 10 districts}
					\end{subfigure}
					\hfill
					\begin{subfigure}[b]{0.4\textwidth}
						\centering
						\resizebox{60mm}{!} {\includegraphics *{images/cloudcover/varianceplotsuttarpradesh.png}}
						\caption{Uttar Pradesh: 69 districts}
					\end{subfigure}
					\caption {Year wise variance plots after thresholding (cont.)}
					\label{fig:varianceplots}
				\end{center}
			\end{figure}

		\end{itemize}
\end{enumerate}

The final classified images of these districts for the years 2014, 2015, 2017 and 2018, can be seen in Fig.~\ref{fig:final_classified_ggn} and Fig.~\ref{fig:final_classified_jpr}. Here, the black pixels represent BU, while the white ones are NBU.

\begin{figure}[H]
	\begin{center}
		\resizebox{55mm}{!} {\includegraphics *{images/classification/ggn2014.png}}
		\resizebox{55mm}{!} {\includegraphics *{images/classification/ggn2015.png}}
		\resizebox{55mm}{!} {\includegraphics *{images/classification/ggn2017.png}}
		\resizebox{55mm}{!} {\includegraphics *{images/classification/ggn2018.png}}
		\caption {Gurgaon: Final classified images, years 2014, 2015, 2017 \& 2018}
		\label{fig:final_classified_ggn}
	\end{center}
\end{figure}

\begin{figure}[H]
	\begin{center}
		\resizebox{55mm}{!} {\includegraphics *{images/classification/jpr2014.png}}
		\resizebox{55mm}{!} {\includegraphics *{images/classification/jpr2015.png}}
		\resizebox{55mm}{!} {\includegraphics *{images/classification/jpr2017.png}}
		\resizebox{55mm}{!} {\includegraphics *{images/classification/jpr2018.png}}
		\caption {Jaipur: Final classified images, years 2014, 2015, 2017 \& 2018}
		\label{fig:final_classified_jpr}
	\end{center}
\end{figure}

\section{Generating urbanisation indices using classified images}
\label{method:urbanisationindices}

\subsection{Extent of change using Temporal Analysis}
\label{method:extentofchange}

Now we proceed with analyzing the behaviour of our results from classification over the years 2014, 2015, 2017 and 2018. For this we run a pixel-wise analysis on classified images. To measure extent of change, we follow the following three steps:

\begin{enumerate}
	\item \hyperref[method:extentofchangespatialsmoothing]{Spatial Smoothing of classified images}	
	\item \hyperref[method:extentofchangetemporalanalysis]{Temporal Analysis}
	\item \hyperref[method:extentofchangethresholds]{Thresholding and Classification}
	\item \hyperref[method:extentofchangevalidation]{Validation of classification results}
\end{enumerate}

As a measure of extent of urbanisation, we get 3 parameters for each district as the percent of Constantly Non-Built up pixels, Constantly Built up pixels and Changing pixels. 

\newcommand{\temporal}[5] {
	\begin{figure}[H]
		\begin{subfigure}[b]{0.6\textwidth}
			\centering
			\resizebox{45mm}{!} {\includegraphics *{images/temporal/#1/#214.png}}
			\resizebox{45mm}{!} {\includegraphics *{images/temporal/#1/#215.png}}
			\resizebox{45mm}{!} {\includegraphics *{images/temporal/#1/#217.png}}
			\resizebox{45mm}{!} {\includegraphics *{images/temporal/#1/#218.png}}
		\end{subfigure}
		\hfill
		\begin{subfigure}[b]{0.4\textwidth}
			\centering
			\resizebox{60mm}{!} {\includegraphics *{images/temporal/#1/#2cdf.png}}
		\end{subfigure}
		\caption {#3: After spatial smoothing using #4-level #5 (a) Classified results (b) CDF plot}
	\end{figure}
}

\subsubsection{Spatial Smoothing of classified images}
\label{method:extentofchangespatialsmoothing}

For each district, each pixel has a value of 0 and 1 for built-up and non built-up consecutively. Since the classification has been pixel-wise, there is no accounting for neighbours. In order to remove discrepancies where a pixel class differs from it's surrounding classes, we perform spatial smoothing on the classified images. After smoothing, each pixel value becomes a number within a range, depending upon the type of smoothing we apply. This is no more a binary classification and we call this as the measure of built-up value. We perform 2 kinds of post-classification smoothing on Gurgaon and Jaipur based on each pixel till levels of neighbours i.e. 1 level neighbours, 2 level neighbours and 3 level neighbours.

\noindent \textbf{Weighted Neighbourhood Score}

In this method, we replace each pixel by its neighbourhood count calculated as:

\[p_{ij} = \sum_{(a,b) \in N}x_{ij} + x_{ab}*(1/w)\]
where:\\
$w = (2n+1)^{2}-1$ \\
N is the set of all n level adjacent neighbours of $x_{ij}$

We apply this scoring for 1,2 and 3 levels of adjacent neighbours.

\begin{itemize}
	\item {\bf 1 Level Adjacent Neighbours}
		\temporal{weighted}{1ggn}{Gurgaon}{1}{Weighted Neighbourhood Score}
		\temporal{weighted}{1jpr}{Jaipur}{1}{Weighted Neighbourhood Score}
	\item {\bf 2 Level Adjacent Neighbours}
		\temporal{weighted}{2ggn}{Gurgaon}{2}{Weighted Neighbourhood Score}
		\temporal{weighted}{2jpr}{Jaipur}{2}{Weighted Neighbourhood Score}
	\item {\bf 3 Level Adjacent Neighbours}
		\temporal{weighted}{3ggn}{Gurgaon}{3}{Weighted Neighbourhood Score}
		\temporal{weighted}{3jpr}{Jaipur}{3}{Weighted Neighbourhood Score}
\end{itemize}

\noindent \textbf{Simple Box Blur followed by Gaussian filter}
 
In this method, we replace each pixel by the value obtained after convolving it with its n level neighbours and then applying a gaussian filter to it. The value post convolution can be calculated as:

\[p_{ij} = \sum_{(a,b) \in N}x_{ij} + x_{ab}\]
where:\\
N is the set of all n level adjacent neighbours of $x_{ij}$

We again apply this scoring for 1,2 and 3 levels of adjacent neighbours.

\begin{itemize}
	\item {\bf 1 Level Adjacent Neighbours}	
		\temporal{convolution}{1ggn}{Gurgaon}{1}{Simple Box Blur followed by Gaussian filter}
		\temporal{convolution}{1jpr}{Jaipur}{1}{Simple Box Blur followed by Gaussian filter}
	\item {\bf 2 Level Adjacent Neighbours}
		\temporal{convolution}{2ggn}{Gurgaon}{2}{Simple Box Blur followed by Gaussian filter}
		\temporal{convolution}{2jpr}{Jaipur}{2}{Simple Box Blur followed by Gaussian filter}
	\item {\bf 3 Level Adjacent Neighbours}
		\temporal{convolution}{3ggn}{Gurgaon}{3}{Simple Box Blur followed by Gaussian filter}
		\temporal{convolution}{3jpr}{Jaipur}{3}{Simple Box Blur followed by Gaussian filter}
\end{itemize}


\subsubsection{Temporal Analysis}
\label{method:extentofchangetemporalanalysis}

Now we observe the patterns of change of the measure of built-up values for each pixel across the period of the four years. For this, we use Linear Regression to fit a line on the 4 values measure of built-up for each pixel and calculate the error in prediction. After applying spatial smoothing to the district, we apply linear regression on the set of values of each pixel across 2014-2018 (except 2016) and get a value of slope and intercept. We then calculate the mean squared error of prediction for all the 4 values of pixel across these years on their corresponding regression lines. We then plot the cdf curves for all the values of mean squared error obtained for each district and use this curve to observe patters of urbanisation in the district.

From the cdf plot we observe 3 regions as follows:
\begin{description}
	\item[Region 1:] Points very close to 0 error. These are generally the pixels that have been constantly BU or NBU throughout the years.
	\item[Region 2:] Points in the curved region. These are the pixels that have changed throughout the years.
	\item[Region 3:] Points in the high cost region that make the asymptote. These are the pixels that are erratically changing between NBU and BU values throughout the years. We can these points as unreliable and should not be considered for deriving indices.
\end{description}

We observe that while for 1 level neighbours, the cdf plots are quite rough which shows that the smoothing method is not very successful in creating uniform regions. With the increase in the levels of neighbours in consideration we get smoother curves, which are shifted closer to 0 error. For 3 level neighbours the CDF plots indicate that more and more pixels become closer to 0 with the points in region 2 becoming lesser. This means due to more rigorous smoothing, we are losing the changing points and thus moving all the pixels to constantly BU or constantly NBU states. In order to preserve the changing points as well as achieve uniform smooth regions, we thus take 2-level neighbours for further analysis. Also we observe that the cdf plots for simple box blur followed by gaussian filter is monotonically increasing with more favourable points, thus in the following discussion we work with 2-level box blur followed by gaussian spatial smoothing, the CDF plot for which can be found in Fig.~\ref{fig:temporalanalysis}. We move on to classify each pixel in three classes: Constantly Built-up, Constantly Non Built-up and Changing.

\begin{figure}[H]
	\begin{center}
		\resizebox{70mm}{!} {\includegraphics *{images/thresholds/temporalAnalysis.png}}
		\caption{CDF plot with R1, R2 and R3}
		\label{fig:temporalanalysis}
	\end{center}
\end{figure}

\subsubsection{Determining thresholds and Classification}
\label{method:extentofchangethresholds}

In order to classify our pixels in the above mentioned categories, we need to find the boundaries of the changing region. For this, we fit a curve to the discrete cdf values and find the double derivative of the fitted curve. We observe that the double derivative is a negative impulse curve and the region around the ‘impulse’ is essentially the Region 2 that is required. On observing the absolute value of double derivative, the value suddenly shoots up around the curvature region and soon it drops down. Thus on finding the values at which the double derivate shoots up and then becomes close to 0, we mark the thresholds for the three region. Once we have the thresholds, we classify pixels in the three categories as follows:

\begin{enumerate}
	\item {The pixels that lie in Region 1 and are Non Built-up in 2014 (initial year) are classified as Constantly NBU.}
	\item {The pixels that lie in Region 1 and are Built-up in 2014 (initial year) are classified as Constantly BU.}
	\item {The pixels that lie in Region 2 are classified as Changing.}
\end{enumerate}

Upon classification, we finally generate the following indices determining the extent of change of urbanisation:

\begin{itemize}
	\item {\% pixels that are constantly non-built up}
	\item {\% pixels that are constantly built up}
	\item {\% pixels that have changed throughout the years}
\end{itemize}

\noindent Marking the points in these regions us a spatial map, figures for which can be seen in Fig.~\ref{fig:map}.

\begin{figure}[H]
	\begin{center}
		\begin{subfigure}[b]{\textwidth}
			\centering
			\resizebox{80mm}{!} {\includegraphics *{images/thresholds/Gurgaon_map.png}}
			\caption{Classification Map for Gurgaon}
		\end{subfigure}
		\caption {Classification Map}
	\end{center}
\end{figure}

\begin{figure}[H]\ContinuedFloat
	\begin{center}
		\begin{subfigure}[b]{\textwidth}
			\centering
			\resizebox{70mm}{!} {\includegraphics *{images/thresholds/Jaipur_map.png}}
			\caption{Classification Map for Jaipur}
		\end{subfigure}
		\begin{subfigure}[b]{\textwidth}
			\centering
			\resizebox{50mm}{!} {\includegraphics *{images/thresholds/labels.png}}
			\caption*{}
		\end{subfigure}
		\caption {Classification Map (contd.)}
		\label {fig:map}
	\end{center}
\end{figure}



\subsubsection{ Validation of results}
\label{method:extentofchangevalidation}

Once we have obtained the parameters, it is important to validate them against the ground truth. We therefore generate a ground truth dataset of 300 points (pixels of 30m X 30m), manually labelled as constantly non-builtup, constantly built-up and changing using historical imagery. This is done using the following steps:

\begin{enumerate}
	\item {\bf Marking points on the map of Gurgaon and Jaipur :} We mark 300 points each on the maps of Gurgaon and Jaipur using MATLAB. Which choosing the points, the following distribution of the points is ensured:
		\begin{itemize}
			\item 100 points from rural farmlands
			\item 100 points from urban clusters
			\item 60 points from urban peripheral areas
			\item 40 points from rocky terrains
		\end{itemize}
	\item {\bf Getting shapefiles :} The Longitude and Latitude values of the points obtained from the marked points in the above process are used to convert these set of points into shapefiles. This is done using QGIS.

	\item {\bf Overlaying points and developing groundtruth :} The shapefiles are then imported into Google Earth Pro (Fig.~\ref{fig:validation}) and using historical imagery, we manually mark the points as Constantly NBU, Constantly BU and Changing. 
\end{enumerate}

\begin{figure}[H]
	\begin{center}
		\begin{subfigure}[b]{\textwidth}
			\centering
			\resizebox{90mm}{!} {\includegraphics *{images/validation/gurgaon.png}}
			\caption{Gurgaon}
		\end{subfigure}
		\hfill
		\begin{subfigure}[b]{\textwidth}
			\centering
			\resizebox{90mm}{!} {\includegraphics *{images/validation/jaipur.png}}
			\caption{Jaipur}
		\end{subfigure}
		\begin{subfigure}[b]{\textwidth}
			\centering
			\resizebox{50mm}{!} {\includegraphics *{images/validation/labels.png}}
			\caption*{}
		\end{subfigure}
		\caption {Distribution of Groundtruth Dataset on Google Earth Pro}
		\label {fig:validation}
	\end{center}
\end{figure}

Once we have developed the Groundtruth, we then estimate the accuracy of our classification and how it changes with moving both the thresholds by certain differences for both Gurgaon and Jaipur.

For Gurgaon, we get the following changes in accuracies on moving thresholds (Fig.~\ref{fig:ggnthresholds}):

\begin{figure}[H]
	\begin{center}
		\begin{subfigure}[b]{0.4\textwidth}
			\centering
			\resizebox{70mm}{!} {\includegraphics *{images/thresholds/t1/Gurgaon_CF.png}}
			\caption{T1 = 3.034; T2 = 54.609 \\ Accuracy: 77.33\%}
		\end{subfigure}
		\hfill
		\begin{subfigure}[b]{0.4\textwidth}
			\centering
			\resizebox{70mm}{!} {\includegraphics *{images/thresholds/t2/Gurgaon_CF.png}}
			\caption{T1 = 8.034; T2 = 54.609 \\ Accuracy: 77.67\%}
		\end{subfigure}
		\hfill
		\begin{subfigure}[b]{0.4\textwidth}
			\centering
			\resizebox{70mm}{!} {\includegraphics *{images/thresholds/t3/Gurgaon_CF.png}}
			\caption{T1 = 8.034; T2 = 30.338 \\ Accuracy: 80.67\%}
		\end{subfigure}
		\hfill
		\begin{subfigure}[b]{0.4\textwidth}
			\centering
			\resizebox{70mm}{!} {\includegraphics *{images/thresholds/t4/Gurgaon_CF.png}}
			\caption{T1 = 8.034; T2 = 18.203 \\ Accuracy: 82.67\%}
		\end{subfigure}
		\hfill
		\begin{subfigure}[b]{0.4\textwidth}
			\centering
			\resizebox{70mm}{!} {\includegraphics *{images/thresholds/t5/Gurgaon_CF.png}}
			\caption{T1 = 13.034; T2 = 54.609 \\ Accuracy: 76.67\%}
		\end{subfigure}
		\caption {Gurgaon: Accuracies \& Confusion matrices for different thresholds}
		\label {fig:ggnthresholds}
	\end{center}
\end{figure}

For Jaipur, we get the following changes in accuracies on moving thresholds  (Fig.~\ref{fig:jprthresholds}:

\begin{figure}[H]
	\begin{center}
		\begin{subfigure}[b]{0.4\textwidth}
			\centering
			\resizebox{70mm}{!} {\includegraphics *{images/thresholds/t1/Jaipur_CF.png}}
			\caption{T1 = 1.578; T2 = 26.831 \\ Accuracy: 81.67\%}
		\end{subfigure}
		\hfill
		\begin{subfigure}[b]{0.4\textwidth}
			\centering
			\resizebox{70mm}{!} {\includegraphics *{images/thresholds/t2/Jaipur_CF.png}}
			\caption{T1 = 6.578; T2 = 26.831 \\ Accuracy: 87.67\%}
		\end{subfigure}
		\hfill
		\begin{subfigure}[b]{0.4\textwidth}
			\centering
			\resizebox{70mm}{!} {\includegraphics *{images/thresholds/t3/Jaipur_CF.png}}
			\caption{T1 = 6.578; T2 = 15.783 \\ Accuracy: 84.00\%}
		\end{subfigure}
		\hfill
		\begin{subfigure}[b]{0.4\textwidth}
			\centering
			\resizebox{70mm}{!} {\includegraphics *{images/thresholds/t4/Jaipur_CF.png}}
			\caption{T1 = 6.578; T2 = 26.831 \\ Accuracy: 75.33\%}
		\end{subfigure}
		\hfill
		\begin{subfigure}[b]{0.4\textwidth}
			\centering
			\resizebox{70mm}{!} {\includegraphics *{images/thresholds/t5/Jaipur_CF.png}}
			\caption{T1 = 11.578; T2 = 26.831 \\ Accuracy: 84.33\%}
		\end{subfigure}
		\caption {Jaipur: Accuracies \& Confusion matrices for different thresholds}
		\label {fig:jprthresholds}
	\end{center}
\end{figure}

This helps us determine the optimal cut-offs for thresholds while automatic thresholding using double derivative of the cdf curves. For this choice of cutoffs, the values of threshold1 and threshold2 for Gurgaon are 8.034 and 54.609 respectively, and for Jaipur are 6.578 and 26.831 respectively. On combining the dataset for the two districts, we get an optimal overall accuracy of 82.67\%. The confusion matrices for Gurgaon, Jaipur and both combined for these values can be found in Fig.~\ref{fig:confusion}.

\begin{figure}[H]
	\begin{center}
		\begin{subfigure}[b]{0.4\textwidth}
			\centering
			\resizebox{70mm}{!} {\includegraphics *{images/thresholds/optimal/Gurgaon_CF.png}}
			\caption{Confusion Matrix for Gurgaon;\\ Accuracy = 77.67\%}
		\end{subfigure}
		\hfill
		\begin{subfigure}[b]{0.4\textwidth}
			\centering
			\resizebox{70mm}{!} {\includegraphics *{images/thresholds/optimal/Jaipur_CF.png}}
			\caption{Confusion Matrix for Jaipur;\\ Accuracy = 87.67\%}
		\end{subfigure}
		\hfill
		\begin{subfigure}[b]{0.4\textwidth}
			\centering
			\resizebox{70mm}{!} {\includegraphics *{images/thresholds/optimal/Combined_CF.png}}
			\caption{Confusion Matrix for Gurgaon \& Jaipur combined;\\ Accuracy = 82.67\%}
		\end{subfigure}
		\caption {Confusion Matrices for optimal thresholds}
		\label {fig:confusion}
	\end{center}
\end{figure}


\noindent \textbf{Analysis of unreliable points in Gurgaon}

We observe that in Gurgaon, there is a prominent area which is like a rocky terrain (Fig.~\ref{fig:rockyterrain}). The pixels in this area are classified erratically over the span of years because our training dataset does not include these kind of points. Due to erratic patterns, these points lie in majorly high cost region of the cdf plots and are classified as unreliable or changing depending on the choice of thresholds (Fig.~\ref{fig:rockyterrainclassified}). These points in the rocky terrain are marked as Constantly Non-Builtup in the groundtruth.

% insert images for actual terrain and what appears in our classification
\begin{figure}[H]
	\begin{center}
		\begin{subfigure}[b]{0.4\textwidth}
			\centering
			\resizebox{70mm}{!} {\includegraphics *{images/thresholds/rockyterrain.png}}
			\caption{Google earth image}
			\label {fig:rockyterrain}
		\end{subfigure}
		\hfill
		\begin{subfigure}[b]{0.4\textwidth}
			\centering
			\resizebox{70mm}{!} {\includegraphics *{images/thresholds/rockyterrainclassified.jpg}}
			\caption{Classified image from temporal analysis}
			\label {fig:rockyterrainclassified}
		\end{subfigure}
		\caption {Patch of rocky terrain in Gurgaon}
	\end{center}
\end{figure}


We proceed with the analysis of how capable our classifier is in identifying the rocky terrains by looking at the accuracy of classification in the following ways:

\begin{enumerate}
	\item Mapping all the points lying in the unreliable region to Constantly Non-Builtup during prediction
	
		\begin{itemize}
			\item For threshold 1 as 8.034 and threshold 2 as 54.609, we get an overall accuracy of 77.67\% with the following confusion matrix:

% 			insert cf1
			\begin{figure}[H]
				\begin{center}
					\resizebox{70mm}{!} {\includegraphics *{images/thresholds/cf_1.png}}
					\caption{Confusion Matrix: Accuracy = 77.67\%}
				\end{center}
			\end{figure}
				
			\item For threshold 1 as 8.034 and threshold 2 as 21.237, we get an overall accuracy of 82.67\% with the following confusion matrix
			
% 			insert cf2
			\begin{figure}[H]
				\begin{center}
					\resizebox{70mm}{!} {\includegraphics *{images/thresholds/cf_2.png}}
					\caption{Confusion Matrix: Accuracy = 82.67\%}
				\end{center}
			\end{figure}

		\end{itemize}
	\item Ignoring all the points lying in the unreliable region from accuracy calculations
	
		\begin{itemize}
			\item For threshold 1 as 8.034 and threshold 2 as 54.609, we get an overall accuracy of 77.85\% with the following confusion matrix
			
% 			insert cf1_1
			\begin{figure}[H]
				\begin{center}
					\resizebox{70mm}{!} {\includegraphics *{images/thresholds/cf_1_1.png}}
					\caption{Confusion Matrix: Accuracy = 77.85\%}
				\end{center}
			\end{figure}

            Although we observe that there is not much change in accuracy, there is a large chunk (46 to be precise) of points that are actually Constantly Non-Builtup but are being predicted as Changing. This is because these points lie in the rocky terrain region. 
            
			\item For threshold 1 as 8.034 and threshold 2 as 21.237, we get an overall accuracy of 86.64\% with the following confusion matrix
			
% 			insert cf1_2
			\begin{figure}[H]
				\begin{center}
					\resizebox{70mm}{!} {\includegraphics *{images/thresholds/cf_1_2.png}}
					\caption{Confusion Matrix: Accuracy = 86.64\%}
				\end{center}
			\end{figure}

            This is because on reducing the value of threshold 2, we shrink the Changing region as well. So although there is a better prediction of rocky terrain as unreliable, it comes along with an underestimation of the points that are Changing in a district.
		\end{itemize}
\end{enumerate}



\subsection{Patterns in change using Blob Detection}
\label{method:patternofchange}

As discussed before, urbanisation cannot be just represented by the percentage change of builtup area (i.e. fraction of area urbanised). The spatial distribution and its growth patterns also convey an important aspect, like whether the growth in a district is unicentered or multicentered. The urbanisation could be because of expansion around the existing urban clusters or emergence of new settlement areas altogether. To understand the clustering in the district, we need to identify the blobs of settlement areas and then monitor the changes over the given duration of time.

We use the technique of blob detection on the smoothened classified images obtained from the previous temporal analysis. For this, we  identify the connected builtup components which can be interpreted as the blobs, by doing a simple breadth first search. Once identified, we generate a few parameters once on regions which stay constant (BU or NBU) throughout, i.e. don't change in the duration of 5 years and once on the regions which remain constant or change over this duration. These regions can be identified from the temporal analysis done for the extent of change. To understand the distribution and concentration of the urban clusters, we use the Herfindahl-Hirschman Index (HHI), which here is used to measure the concentration for a district, based on the number of clusters and their share in the urbanisation. HHI Index is defined as follows:

\[HHI = s_{1}^{2} + s_{2}^{2} + s_{3}^{2} + .... s_{n}^{2}\]
where:\\
$s_{n}$ is the market share percentage of firm, n expressed as a whole number, not a decimal

In each of these, the unreliable points obtained from the previous analysis are skipped. The parameters generated from this analysis are:

\begin{itemize}
	\item Constant regions:
		\begin{enumerate}	
			\item Number of blobs in the district
			\item \% of BU pixels (out of the total BU pixels) present in the largest blob
			\item HHI Index
		\end{enumerate}
	\item Constant \& changing regions:
		\begin{enumerate}	
			\item Number of blobs in the district
			\item \% of BU pixels (out of the total BU pixels) present in the largest blob
			\item HHI Index
		\end{enumerate}
\end{itemize}

For Gurgaon, the results can be found in Fig.~\ref{fig:blobconsggn} and Fig.~\ref{fig:blobchangeggn}. 

{\bf Regions which are constant (no unreliable or changing points):}

	\begin{figure}[H]
		\begin{center}
			\begin{subfigure}[b]{0.4\textwidth}
				\centering
				\resizebox{70mm}{!} {\includegraphics *{images/blobs/blobconsggn_largest.jpg}}
				\caption{Largest Blob}
			\end{subfigure}
			\hfill
			\begin{subfigure}[b]{0.4\textwidth}
				\centering
				\resizebox{70mm}{!} {\includegraphics *{images/blobs/blobconsggn_all.jpg}}
				\caption{All Blobs}
			\end{subfigure}
			\caption {Blobs: For constant regions}
			\label{fig:blobconsggn}
		\end{center}
	\end{figure}

	\begin{itemize}
		\item Num of blobs : 522
		\item \%BU in the largest blob : 56.2209
		\item HHI Index : 3240.73
	\end{itemize}

{\bf Regions which are constant + changing (no unreliable points):}

	\begin{figure}[H]
		\begin{center}
			\begin{subfigure}[b]{0.4\textwidth}
				\centering
				\resizebox{70mm}{!} {\includegraphics *{images/blobs/blobchangeggn_largest.jpg}}
				\caption{Largest Blob}
			\end{subfigure}
			\hfill
			\begin{subfigure}[b]{0.4\textwidth}
				\centering
				\resizebox{70mm}{!} {\includegraphics *{images/blobs/blobchangeggn_all.jpg}}
				\caption{All Blobs}
			\end{subfigure}
			\caption {Blobs: For constant \& changing regions}
			\label{fig:blobchangeggn}
		\end{center}
	\end{figure}

	\begin{itemize}
		\item Num of blobs : 127
		\item \%BU in the largest blob : 66.9556
		\item HHI Index : 4839.49
	\end{itemize}

We therefore obtain 6 parameters to represent the patterns of change for a district, by analysing the spatial distribution of the urban clusters and the changes over the given time period.
